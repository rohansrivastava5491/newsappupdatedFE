import{r as l,j as t,a as h}from"./react-e18f0737.js";import{c as _}from"./react-dom-ef54bb36.js";import{B as j}from"./react-router-dom-dd71e3b7.js";import{a as L,b as p,N as x}from"./react-router-e59ff506.js";import"./materialize-css-70fed0bb.js";import"./scheduler-765c72db.js";import"./@remix-run-3dbd2488.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))d(r);new MutationObserver(r=>{for(const e of r)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&d(s)}).observe(document,{childList:!0,subtree:!0});function i(r){const e={};return r.integrity&&(e.integrity=r.integrity),r.referrerPolicy&&(e.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?e.credentials="include":r.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function d(r){if(r.ep)return;r.ep=!0;const e=i(r);fetch(r.href,e)}})();const P="modulepreload",A=function(o){return"/"+o},v={},y=function(c,i,d){if(!i||i.length===0)return c();const r=document.getElementsByTagName("link");return Promise.all(i.map(e=>{if(e=A(e),e in v)return;v[e]=!0;const s=e.endsWith(".css"),f=s?'[rel="stylesheet"]':"";if(!!d)for(let a=r.length-1;a>=0;a--){const m=r[a];if(m.href===e&&(!s||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${e}"]${f}`))return;const n=document.createElement("link");if(n.rel=s?"stylesheet":P,s||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),s)return new Promise((a,m)=>{n.addEventListener("load",a),n.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${e}`)))})})).then(()=>c()).catch(e=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=e,window.dispatchEvent(s),!s.defaultPrevented)throw e})},g=l.createContext(),E=l.createContext(),w=({children:o})=>{const[c,i]=l.useState("");return t.jsx(g.Provider,{value:{userName:c,setUserName:i},children:o})},R=({children:o})=>{const[c,i]=l.useState(!1),[d,r]=l.useState(!0);l.useEffect(()=>{(async()=>{try{const u=s("token");if(console.log(u),u){const a=await(await fetch("https://newsappupdated.onrender.com/api/v1/auth/verifyToken",{method:"GET",headers:{Authorization:u,"Content-Type":"application/json"}})).json();console.log(a),a.authenticated&&i(!0)}}catch(u){console.error("Error verifying token:",u)}finally{r(!1)}})()},[]);const e=f=>{i(f)},s=f=>{const u=document.cookie.split(";").map(n=>n.trim());for(const n of u){const[a,m]=n.split("=");if(a===f)return m}return""};return t.jsx(E.Provider,{value:{authenticated:c,setAuthenticated:i,updateAuthState:e},children:!d&&o})},q=()=>{const o=l.useContext(g);if(!o)throw new Error("useUser must be used within a UserProvider");return o},k=()=>{const o=l.useContext(E);if(!o)throw new Error("useAuth must be used within an AuthProvider");return o},O=h.lazy(()=>y(()=>import("./Home-c9559962.js"),["assets/Home-c9559962.js","assets/react-e18f0737.js","assets/materialize-css-70fed0bb.js","assets/Layout-e550dec1.js","assets/Layout-3b47a9c2.css","assets/react-router-e59ff506.js","assets/@remix-run-3dbd2488.js","assets/Home-16585f23.css"])),S=h.lazy(()=>y(()=>import("./ArticleList-2e4c8fd4.js"),["assets/ArticleList-2e4c8fd4.js","assets/react-e18f0737.js","assets/materialize-css-70fed0bb.js","assets/getCookie-1314a3b0.js","assets/axios-47b9d439.js","assets/react-router-e59ff506.js","assets/@remix-run-3dbd2488.js","assets/react-dom-ef54bb36.js","assets/scheduler-765c72db.js","assets/react-router-dom-dd71e3b7.js"])),z=h.lazy(()=>y(()=>import("./SavedArticles-0094f398.js"),["assets/SavedArticles-0094f398.js","assets/react-e18f0737.js","assets/materialize-css-70fed0bb.js","assets/axios-47b9d439.js","assets/getCookie-1314a3b0.js","assets/react-router-e59ff506.js","assets/@remix-run-3dbd2488.js","assets/react-dom-ef54bb36.js","assets/scheduler-765c72db.js","assets/react-router-dom-dd71e3b7.js"])),C=h.lazy(()=>y(()=>import("./Login-799ee5a8.js"),["assets/Login-799ee5a8.js","assets/react-e18f0737.js","assets/materialize-css-70fed0bb.js","assets/axios-47b9d439.js","assets/Layout-e550dec1.js","assets/Layout-3b47a9c2.css","assets/style-9ab63b03.js","assets/style-555a635f.css","assets/react-router-e59ff506.js","assets/@remix-run-3dbd2488.js","assets/react-dom-ef54bb36.js","assets/scheduler-765c72db.js","assets/react-router-dom-dd71e3b7.js"])),T=h.lazy(()=>y(()=>import("./Register-588c5bfa.js"),["assets/Register-588c5bfa.js","assets/react-e18f0737.js","assets/materialize-css-70fed0bb.js","assets/axios-47b9d439.js","assets/Layout-e550dec1.js","assets/Layout-3b47a9c2.css","assets/style-9ab63b03.js","assets/style-555a635f.css","assets/react-router-e59ff506.js","assets/@remix-run-3dbd2488.js","assets/react-dom-ef54bb36.js","assets/scheduler-765c72db.js","assets/react-router-dom-dd71e3b7.js"])),N=()=>{const{authenticated:o}=k();return t.jsx(j,{children:t.jsx(l.Suspense,{fallback:t.jsx("div",{children:"Loading..."}),children:t.jsxs(L,{children:[t.jsx(p,{path:"/",element:t.jsx(O,{})}),t.jsx(p,{path:"/register",element:t.jsx(T,{})}),t.jsx(p,{path:"/articlelist",element:o?t.jsx(S,{}):t.jsx(x,{to:"/login"})}),t.jsx(p,{path:"/savedArticles",element:o?t.jsx(z,{}):t.jsx(x,{to:"/login"})}),t.jsx(p,{path:"/login",element:t.jsx(C,{})})]})})})};_.createRoot(document.getElementById("root")).render(t.jsx(h.StrictMode,{children:t.jsx(R,{children:t.jsx(w,{children:t.jsx(N,{})})})}));export{k as a,q as u};
