import{r as t,j as e}from"./react-e18f0737.js";import{a as U}from"./axios-47b9d439.js";import{a as L,u as k}from"./index-f2cbb2ea.js";import{L as E}from"./Layout-e550dec1.js";import{u as R}from"./style-9ab63b03.js";import{u as T}from"./react-router-e59ff506.js";import"./materialize-css-70fed0bb.js";import"./react-dom-ef54bb36.js";import"./scheduler-765c72db.js";import"./react-router-dom-dd71e3b7.js";import"./@remix-run-3dbd2488.js";const G=()=>{const{isUpperCaseValid:r,isSpecialCharValid:n,isLengthValid:o,validatePassword:N}=R(),{updateAuthState:v}=L(),{setUserName:b}=k(),d=T(),[m,p]=t.useState(""),[u,h]=t.useState(""),[g,x]=t.useState(""),[j,f]=t.useState(""),[l,w]=t.useState(!1),i=t.useRef(null),y=s=>{x(s.target.value),N(s.target.value)},S=(s,a,P)=>{const c=new Date;c.setTime(c.getTime()+P*24*60*60*1e3);const I="expires="+c.toUTCString();document.cookie=s+"="+a+";"+I+";path=/"},C=async s=>{s.preventDefault(),w(!0);try{const a=await U.post("https://newsappupdated.onrender.com/api/v1/auth/register",{name:m,email:u,password:g});S("token",a.data.token,7),localStorage.setItem("userId",a.data.newUser._id),localStorage.setItem("userEmail",a.data.newUser.email),b(a.data.newUser.name),v(!0),console.log(a.data.message),p(""),h(""),x(""),d("/articlelist")}catch(a){console.error("Registration error:",a.message),f(a.response.data.message)}finally{w(!1)}};return e.jsx(E,{children:e.jsx("section",{id:"contact",children:e.jsxs("div",{className:"cs-container",children:[e.jsxs("div",{className:"cs-content",children:[e.jsx("span",{className:"cs-topper",style:{paddingTop:"30px"},children:"Register"}),e.jsx("h2",{className:"cs-title",children:"Unlock the News Zone! Let's Dive In! "})]}),e.jsxs("form",{className:"cs-form",id:"cs-form",onSubmit:C,name:"Contact Form",children:[j&&e.jsx("p",{className:"cs-topper",children:j}),e.jsxs("label",{className:"cs-label",children:["Name",e.jsx("input",{className:"cs-input",type:"text",id:"name",onChange:s=>{p(s.target.value)},name:"name",value:m,placeholder:"Name"})]}),e.jsxs("label",{className:"cs-label cs-email",children:["Email",e.jsx("input",{className:"cs-input",required:!0,type:"email",id:"email",onChange:s=>{h(s.target.value)},name:"email",value:u,placeholder:"Email"})]}),e.jsxs("label",{className:"cs-label cs-phone",children:["Password",e.jsx("input",{className:"cs-input",required:!0,type:"password",id:"phone",onChange:y,name:"phone",value:g,placeholder:"Password",ref:i}),i.current&&i.current.value&&e.jsxs(e.Fragment,{children:[e.jsxs("text",{style:{color:r?"green":"red"},children:[r?"✓":"✗"," Password must contain at least 1 uppercase letter."]}),e.jsxs("text",{style:{color:n?"green":"red"},children:[n?"✓":"✗"," Password must contain at least 1 special character (!@#$%^&*)."]}),e.jsxs("text",{style:{color:o?"green":"red"},children:[o?"✓":"✗"," Password must be at least 8 characters long."]})]})]}),e.jsx("button",{className:`cs-button-solid cs-submit ${l?"cs-submit-disabled":""}`,type:"submit",disabled:l||!r||!n||!o,children:l?"Please wait...":"Sign In"}),e.jsxs("span",{children:[" ","Already have an account?",e.jsx("a",{style:{padding:"10px",color:"blueviolet"},onClick:()=>d("/login"),children:"Log In"})]})]})]})})})};export{G as default};
