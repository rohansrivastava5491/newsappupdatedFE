import{r as t,j as e}from"./react-e18f0737.js";import{a as P}from"./axios-47b9d439.js";import{a as C,u as I}from"./index-f2cbb2ea.js";import{L as E}from"./Layout-e550dec1.js";import{u as k}from"./style-9ab63b03.js";import{u as D}from"./react-router-e59ff506.js";import"./materialize-css-70fed0bb.js";import"./react-dom-ef54bb36.js";import"./scheduler-765c72db.js";import"./react-router-dom-dd71e3b7.js";import"./@remix-run-3dbd2488.js";const z=()=>{const{isUpperCaseValid:r,isSpecialCharValid:o,isLengthValid:n,validatePassword:j}=k(),{updateAuthState:f}=C(),{setUserName:w}=I(),d=D(),[m,u]=t.useState(""),[p,h]=t.useState(""),[g,v]=t.useState(""),[i,x]=t.useState(!1),l=t.useRef(null),b=a=>{h(a.target.value),j(a.target.value)},y=(a,s,S)=>{const c=new Date;c.setTime(c.getTime()+S*24*60*60*1e3);const L="expires="+c.toUTCString();document.cookie=a+"="+s+";"+L+";path=/"},N=async a=>{if(a.preventDefault(),!(!r||!o||!n)){x(!0);try{const s=await P.post("https://newsappupdated.onrender.com/api/v1/auth/login",{email:m,password:p});y("token",s.data.token,7),localStorage.setItem("userId",s.data.user._id),localStorage.setItem("userEmail",s.data.user.email),w(s.data.user.name),f(!0),u(""),h(""),d("/articlelist")}catch(s){console.error("Login error:",s.message),v(s.response.data.message)}finally{x(!1)}}};return e.jsx(E,{children:e.jsx("section",{id:"contact",children:e.jsxs("div",{className:"cs-container",children:[e.jsxs("div",{className:"cs-content",children:[e.jsx("span",{className:"cs-topper",style:{paddingTop:"30px"},children:"Log In"}),e.jsx("h2",{className:"cs-title",children:"Ready to Dive In? Let's Get Newsy! "})]}),e.jsxs("form",{className:"cs-form",id:"cs-form",onSubmit:N,name:"Contact Form",children:[g&&e.jsx("p",{className:"cs-topper",children:g}),e.jsxs("label",{className:"cs-label cs-email",children:["Email",e.jsx("input",{className:"cs-input",required:!0,type:"email",id:"email",onChange:a=>{u(a.target.value)},name:"email",value:m,placeholder:"Email"})]}),e.jsxs("label",{className:"cs-label cs-phone",children:["Password",e.jsx("input",{className:"cs-input",required:!0,type:"password",id:"phone",onChange:b,name:"phone",value:p,placeholder:"Password",ref:l}),l.current&&l.current.value&&e.jsxs(e.Fragment,{children:[e.jsxs("text",{style:{color:r?"green":"red"},children:[r?"✓":"✗"," Password must contain at least 1 uppercase letter."]}),e.jsxs("text",{style:{color:o?"green":"red"},children:[o?"✓":"✗"," Password must contain at least 1 special character (!@#$%^&*)."]}),e.jsxs("text",{style:{color:n?"green":"red"},children:[n?"✓":"✗"," Password must be at least 8 characters long."]})]})]}),e.jsx("button",{className:`cs-button-solid cs-submit ${i?"cs-submit-disabled":""}`,type:"submit",disabled:i||!r||!o||!n,children:i?"Please wait...":"Log In"}),e.jsxs("span",{children:["Don't have an account?",e.jsx("a",{style:{padding:"10px",color:"blueviolet"},onClick:()=>d("/register"),children:"Sign In"})]})]})]})})})};export{z as default};
