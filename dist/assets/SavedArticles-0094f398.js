import{r,j as e}from"./react-e18f0737.js";import{u as R,a as $}from"./index-f2cbb2ea.js";import{M as f}from"./materialize-css-70fed0bb.js";import{a as j}from"./axios-47b9d439.js";import{g}from"./getCookie-1314a3b0.js";import{u as L}from"./react-router-e59ff506.js";import"./react-dom-ef54bb36.js";import"./scheduler-765c72db.js";import"./react-router-dom-dd71e3b7.js";import"./@remix-run-3dbd2488.js";const G=()=>{const{userName:v}=R(),{updateAuthState:N}=$(),m=L(),[y,k]=r.useState(!1),[S,l]=r.useState(!1),[a,o]=r.useState(1),[n]=r.useState(6),[d,h]=r.useState([]),p=a*n,w=p-n,u=d.slice(w,p),x=Math.ceil(d.length/n),A=Array.from({length:x},(s,t)=>t+1),C=async s=>{f.toast({html:"Article Removed!"});const t=localStorage.getItem("userId");console.log(`UserID: ${t}, ArticleID: ${s}`);const i=g("token");try{await j.delete(`https://newsappupdated.onrender.com/articles/${t}/${s}`,{headers:{Authorization:`${i}`,"Content-Type":"application/json"}});const c=d.filter(P=>P._id!==s);h(c)}catch(c){console.error("Error deleting article:",c)}},b=async()=>{l(!0);const s=g("token"),t=localStorage.getItem("userId");try{const c=(await j.get(`https://newsappupdated.onrender.com/articles/${t}`,{headers:{Authorization:s,"Content-Type":"application/json"}})).data.articles;console.log(c),h(c),l(!1)}catch(i){console.error("Error fetching articles:",i),l(!1)}k(!0)},I=()=>{localStorage.removeItem("token"),N(!1),m("/")},z=()=>{a!==1&&o(a-1)},E=()=>{a!==x&&o(a+1)};return r.useEffect(()=>{f.AutoInit(),b();const s=document.createElement("script");s.src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js",s.async=!0,document.body.appendChild(s);const t=document.createElement("link");return t.href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css",t.rel="stylesheet",document.head.appendChild(t),()=>{document.head.removeChild(t),document.body.removeChild(s)}},[]),e.jsxs("div",{className:"articlelist-section",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col s9 m9",children:e.jsxs("p",{style:{fontFamily:"monospace",fontSize:"20px",padding:"10px"},children:["ðŸ‘‹ Welcome back, ",v,"!"]})}),e.jsxs("div",{className:"col s3 m3",children:[e.jsx("button",{className:"btn waves-effect waves-light left purple",type:"submit",name:"action",style:{marginTop:"10px"},onClick:I,children:"Log out"}),e.jsx("button",{className:"btn waves-effect waves-light left purple",type:"submit",name:"action",style:{marginTop:"10px"},onClick:()=>m("/articlelist"),children:"Article List"})]})]}),e.jsx("h3",{className:"center purple-text darken-3",style:{fontFamily:"monospace"},children:"My Saved Articles"}),S&&e.jsx("div",{className:"progress",children:e.jsx("div",{className:"indeterminate"})}),e.jsxs("div",{className:"container row",children:[e.jsx("div",{className:"col s12",children:u.map((s,t)=>e.jsx("div",{className:"col s12 m6",children:e.jsxs("div",{className:"card purple white-text z-depth-3",style:{height:"380px"},children:[e.jsxs("div",{className:"card-image",children:[e.jsx("img",{src:s.articleImage,style:{height:"180px"},alt:s.articleName}),e.jsx("span",{className:"card-title",children:s.articleName})]}),e.jsxs("div",{className:"card-content",style:{padding:"10px"},children:[e.jsx("p",{children:s.articleText}),"From ",s.articleSource]}),e.jsxs("div",{className:"card-action",children:[e.jsx("a",{onClick:()=>{console.log(s),C(s._id)},children:"Remove Article"}),e.jsx("a",{href:s.articleLink,children:"Read More"})]})]})},t))}),u&&e.jsx("div",{className:"col 12",children:y&&e.jsxs("ul",{className:"pagination",children:[e.jsx("li",{className:"waves-effect",children:e.jsx("a",{href:"#!",onClick:z,children:e.jsx("i",{className:"material-icons",children:"chevron_left"})})}),A.map(s=>e.jsx("li",{className:`waves-effect ${a===s?"active":""}`,children:e.jsx("a",{onClick:()=>o(s),className:"page-link",href:"#!",children:s})},s)),e.jsx("li",{className:"waves-effect",children:e.jsx("a",{href:"#!",onClick:E,children:e.jsx("i",{className:"material-icons",children:"chevron_right"})})})]})})]})]})};export{G as default};
